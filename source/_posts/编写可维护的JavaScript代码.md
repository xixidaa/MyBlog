---
title: 编写可维护的JavaScript代码(一)
date: 2018-02-08 11:18:35
tags:
---

# 编写可维护的javascript代码(一)



## 1,编程风格

 

### 1,空行处理

一般来讲,在下面场景中添加空行是不错的主意

1.在方法间

2.在方法中的局部变量和第一条语句之间

3.在多行或单行文本之间

4.在方法内的逻辑片段之间插入空格,提高可读性

5.在每个流程控制语句之前(for ,if)

### 2,命名

只要是写代码,都会涉及变量和函数,因此变量和函数的命名对于增强代码的可读性至关重要.

JavaScript采用的是ECMAScript规则,即是遵循驼峰式大小命名法.

> 驼峰式大小命名法:由小写字母开始,后续的每一个单词的首字母都要大写

#### 2.1  变量

变量名应当总是遵守驼峰命名法,并且命名的前缀应该是名词

#### 2.2 函数

对于函数和方法命名来说,第一个应该是动词,下列有一些动词常见的约定

can/has/is: 函数返回一个布尔值

get: 函数返回一个非布尔值

set: 函数用来保存一个值

#### 2.3 常量

为了区别常量和变量,产生一个通用的命名约定(来自C语言)

> 使用大写字母和下划线来命名,下划线用以分隔单词

### 3,null

null是一个特殊值,在以下场景下应当使用null

> - 用来初始化一个变量,这个变量可能赋值为一个对象
> - 用来和一个已经初始化的变量比较,这个变量可以是也可以不是一个对象
> - 当函数的参数期望是对象时,用做函数传入
> - 当函数的参数期望是对象时,用作返回值传入

下面的一些场景不应当使用null

> - 不要使用null来检测是否传入某个参数
> - 不要用null来检测一个未初始化的变量



## 2,注释

### 0 ,使用注释

> - 添加注释的一般原则是,在需要让代码变得清晰地时候添加注释
> - 难以理解的代码需要添加注释
> - 当你的代码有可能被别的开发者认为有错误时,也需要添加注释
>
> 

### 1.单行注释

> - 独占一行的注释,用来解释下一行代码.这行注释之前总是有一个空行,且缩进的层级和下一行代码保持一致.
> - 在代码行的尾部的注释.代码结束到注释之间至少有一个缩进.注释(包括前面的代码部分)不应当超过单行文本的最大字符数限制,如果超过了,应将注释放在该行代码的上方
> - 被注释掉的大段代码

### 2,多行文本

> 多行文本总是出现在将要描述的代码之前,注释和代码之间没有空行间隔.和单行注释一行,多行注释之前应该有一空行,且缩进层级和其描述的代码保持一致.

## 3,语句和表达式

### 3.0

> 绝大多数js开发者都认可这一点:无论是块语句包含的是一行还是多行代码,都应当使用花括号,因为省略花括号会造成一些困惑
>
> - if
> - for
> - while
> - do...while...
> - try...catch...finally 

### 3.1, 花括号的对齐方式

> - 将花括号放置在块语句中第一句代码的末尾
> - 将左花括号放置于块语句首行的下一行

### 3.2,块语句间隔

> - 第一种,块语句,圆括号,和左花括号之间没有空格间隙
>
> ```js
> if(条件){
> doSomething();
> }
> ```
>
> - 第二种,在左花括号之前和右花括号之后各添加一个空格
>
> ```js
> if (条件) {
> doSomething();
> }
> ```
>
> - 第三种,在左圆括号后和右圆括号前各添加一个空格
>
> ```js
> if ( 条件 ) {
> doSomething();
> }
> ```
>
> 个人倾向于第二种风格,这是一三风格的折中

### 3.3 switch语句

> ### 3.3.1  缩进
>
> > 1. 第一种
> >    - 每条case语句相对于switch关键字都缩进一个层级
> >    - 从第二条case语句开始,每条case语句前后各有一个空格
> >
> > ```js
> > switch (条件) {
> >    case 1 :
> >        //代码
> >        break;
> >        
> >    case 2 :
> >        //代码
> >        break;
> >   	default :
> >        //代码
> > }
> > ```
> >
> > 2. 第二种
> >
> >    > - case关键字保持和switch关键字左对齐
> >    > - 语句中并没有空行的存在

### 3.3.2 case语句的连续执行

> 只要是有意为之且添加了注释,就可以使用case语句的连续执行

### 3.3.3 default

> 作者倾向于在没有默认行为且写了注释的的情况下省略default

## 3.4 with语句

with语句可以更改包含的上下文解析变量的方式.通过with可以用局部变量和函数的形式来访问特定对象的属性和方法,这样就可以将对象前缀统统省掉.如果一段代码中书写了很多的对象成员,则可以使用with语句来缩短这段代码.

```js
var book = {
    title: "西游记",
    auther: "吴承恩"
};

var message = "这本书的名字是";

with (book) {
    message += title;
    message += "作者是" + auther;
}
```

## 3.5 for循环

for循环有两种,一种是传统的for循环,另一种是for in 循环,用来遍历对象的属性.

* for in 循环是用来遍历对象属性的.不用定以任何控制条件,循环将会有条不紊的遍历每一个对象属性,并返回属性名而不是值

  >```js
  >var keys;
  >
  >for (keys in obj) {
  >    console.log("属性名是" + keys);
  >    console.log("属性值是" + obj[keys]);
  >}
  >```

* for in 存在的问题:他不仅遍历对象的实例属性,同样遍历从原型中继承的属性.当遍历自定义对象的属性时,往往会因为意外的结果而终止.

  ```js
     	Object.prototype.height = 180;
      Object.prototype.weight = 80;
  ```

  解决方法:最好使用hasOwnProperty()方法来为for in 循环过滤出实例属性.

  ```js
  
      for (keys in obj) {
          //通过对象自身的hasOwnProperty的方法来循环过滤出对象的实例属性
          if (obj.hasOwnProperty(keys)) {
              console.log("属性名为:" + keys);
              console.log("属性的值为:" + obj[keys]);
          }
      }
  ```

  